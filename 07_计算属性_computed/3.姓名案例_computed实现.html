<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>姓名案例_computed实现</title>
    <script type="text/javascript" src="../js/vue.js"></script>
</head>

<body>
    <div id="root">
        姓：<input type="text" v-model="firstName"><br/> 名：<input type="text" v-model="lastName"><br/><br/>
        <span>全名：{{fullName}}</span> <br/><br/>全名： <input type="text" v-model="fullName">
    </div>
</body>
<!-- 
    1.计算属性：要显示的数据不存在，要通过计算得来
    2.fullName函数底层用到的是对象setter和getter方法
    3.执行的时机：
        （1）.初始显示会执行一次，得到初始值去显示
        （2）.当依赖的数据发生改变时会被再次调用
    4.优势：与methods实现相比，内容有缓存机制，效率更高
 -->
<script type="text/javascript">
    new Vue({
        el: '#root',
        data: {
            firstName: '张',
            lastName: '三'
        },
        computed: {


            // fullName是谁在调用---VUe
            //fullName初次渲染会被调用，当依赖的属性值发生变化

            // 简写--相当于只指定了get没有指定set
            // fullName() {
            //     return this.firstName + this.lastName
            // }




            // 完整写法
            fullName: {
                set(value) { //fullName被修改时，set被调用，set中的this是vue，set会收到修改的值
                    const arr = value.split('-')
                    this.firstName = aar[0]
                    this.lastName = arr[1]

                },
                get() { //fullName被读取时，get被调用，get中的this是vm
                    return this.firstName + this.lastName
                }
            }
        }

    })
</script>

</html>